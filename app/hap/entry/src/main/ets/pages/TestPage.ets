import SettingsCenter from './SettingsCenter';
import MyHome from './MyHome';
import DevicePanel from "./DevicePanel";
import { activeServer } from '../data/ServerStore';

@Entry
@Component
struct DeviceDashboard {
  @State selectedTab: number = 0;

  build() {
    Column() {
      // æ ‡é¢˜æ æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„æœåŠ¡å™¨ä¿¡æ¯ï¼Œä»Žå…¨å±€å˜é‡ activeServer è¯»å–
      Row() {
        Text("ðŸ–¥ " + activeServer.name + " (" + activeServer.ip + ")")
          .fontSize(18)
          .fontWeight(FontWeight.Medium)
          .layoutWeight(1)
          .textAlign(TextAlign.Center);
      }
      .padding({ top: 20, bottom: 20 })
      .backgroundColor("#FFF")
      .width("100%");

      // åˆ†å‰²çº¿
      Row() {}
      .width("100%")
      .height(1)
      .backgroundColor("#E0E0E0");

      // å†…å®¹åŒºåŸŸï¼Œæ ¹æ® selectedTab æ˜¾ç¤ºä¸åŒé¡µé¢
      Stack() {
        if (this.selectedTab == 0)
          DevicePanel();
        else if (this.selectedTab == 1)
          MyHome();
        else if (this.selectedTab == 2)
          SettingsCenter();
      }
      .layoutWeight(1)
      .width("100%");

      // åº•éƒ¨é¡µç­¾æ 
      Row() {
        Button("ðŸ“± è®¾å¤‡é¢æ¿")
          .onClick(() => { this.selectedTab = 0; })
          .layoutWeight(1)
          .backgroundColor("transparent")
          .fontColor(this.selectedTab == 0 ? "#000000" : "#888888")
          .borderWidth(0);
        Button("ðŸ  æˆ‘çš„å®¶åº­")
          .onClick(() => { this.selectedTab = 1; })
          .layoutWeight(1)
          .backgroundColor("transparent")
          .fontColor(this.selectedTab == 1 ? "#000000" : "#888888")
          .borderWidth(0)
          .margin({ left: 8 });
        Button("âš™ï¸ è®¾ç½®ä¸­å¿ƒ")
          .onClick(() => { this.selectedTab = 2; })
          .layoutWeight(1)
          .backgroundColor("transparent")
          .fontColor(this.selectedTab == 2 ? "#000000" : "#888888")
          .borderWidth(0)
          .margin({ left: 8 });
      }
      .height(60)
      .backgroundColor("#FFF")
      .position({ bottom: 0, left: 0, right: 0 });
    }
    .width("100%")
      .height("100%")
      .backgroundColor("#F5F5F5");
  }
}
